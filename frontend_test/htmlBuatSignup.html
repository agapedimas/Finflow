<script src="https://cdn.jsdelivr.net/npm/@web3auth/modal@9.4.0/dist/modal.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@web3auth/ethereum-provider@9.4.0/dist/ethereumProvider.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>

<script src="js/finflow-sdk.js"></script>

<script>
    // A. Inisialisasi saat halaman load
    window.onload = async () => {
        // Pasang Finflow ke Window biar global
        window.Finflow = Finflow; 
        
        const user = await Finflow.init();
        if (user) {
            console.log("User sudah login:", user.email);
            // Update UI header (Tampilkan foto profil, dll)
        }
    };

    // B. Saat Tombol "Login Google" diklik
    async function handleLoginBtn() {
        const user = await Finflow.login();
        alert("Welcome " + user.email);
    }

    // C. Saat Form Register disubmit
    async function handleRegisterSubmit() {
        const dataInput = {
            fullName: document.getElementById("inputNama").value,
            orgName: document.getElementById("inputOrg").value,
            bankName: "BCA",
            bankAccount: "123"
        };

        // Panggil fungsi SDK satu baris aja!
        const result = await Finflow.registerFunder(dataInput);

        if (result.success) {
            window.location.href = "dashboard.html";
        } else {
            alert(result.message);
        }
    }
</script>

